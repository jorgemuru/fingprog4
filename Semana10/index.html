<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P4 - Semana 10: Guías, Estructura y Patrones</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --pastel-blue: #ebf4f6;
            --pastel-pink: #f9f1f0;
            --pastel-green: #e8f5e9;
            --pastel-yellow: #fff9e6;
            --accent-blue: #b2d8d8;
            --text-color: #555;
        }

        body { font-family: 'Quicksand', sans-serif; background-color: var(--pastel-blue); color: var(--text-color); }
        .slide-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .card-slide { background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); max-width: 850px; width: 100%; padding: 40px; border: none; display: none; }
        .card-slide.active { display: block; }
        .btn-pastel { background-color: var(--accent-blue); border: none; color: white; padding: 10px 25px; border-radius: 50px; transition: all 0.3s; }
        .btn-pastel:hover { background-color: #96c9c9; transform: scale(1.05); }
        .analogy-box { background-color: var(--pastel-yellow); border-left: 5px solid #f0ad4e; padding: 15px; margin-top: 20px; border-radius: 0 10px 10px 0; font-size: 0.95rem; }
        .nav-dots { position: fixed; bottom: 20px; width: 100%; display: flex; justify-content: center; gap: 10px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; background: #ccc; cursor: pointer; }
        .dot.active { background: var(--accent-blue); }
        .pattern-badge { background-color: var(--pastel-pink); padding: 3px 10px; border-radius: 10px; font-weight: bold; font-size: 0.85rem; }
    </style>
</head>
<body>

<div class="slide-container">
    <div class="card-slide active animate__animated animate__fadeIn" id="slide0">
        <div class="text-center">
            <div class="mb-3" style="font-size: 4rem; color: var(--accent-blue);">
                <i class="fas fa-drafting-compass"></i>
            </div>
            <h1 class="fw-bold">Programación 4</h1>
            <p class="lead">Semana 10: De la Interacción a la Estructura</p>
            <hr class="my-4">
            <p>Aprenderemos a documentar la estructura final (DCD) y a usar soluciones de expertos: los Patrones de Diseño.</p>
            <button class="btn btn-pastel mt-3" onclick="nextSlide()">Comenzar Arquitectura <i class="fas fa-chevron-right ms-2"></i></button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide1">
        <h3><i class="fas fa-project-diagram me-2 text-primary"></i> El Diagrama de Clases de Diseño (DCD)</h3>
        <p>Una vez que sabemos cómo interactúan los objetos, debemos definir su estructura estática permanente.</p>
        <ul>
            <li><strong>Navegabilidad:</strong> Indica si un objeto conoce a otro (flechas).</li>
            <li><strong>Operaciones:</strong> Se derivan directamente de los mensajes de los diagramas de comunicación.</li>
            <li><strong>Colecciones:</strong> Se incluyen cuando la multiplicidad es mayor a 1.</li>
        </ul>
        <div class="analogy-box">
            <i class="fas fa-map me-2"></i><strong>Analogía:</strong> Si el diagrama de comunicación era la conversación telefónica, el **DCD** es la guía de contactos donde anotas quién tiene el número de quién y qué etiquetas les pones.
        </div>
        <div class="mt-4 text-center">
            <button class="btn btn-pastel" onclick="prevSlide()">Atrás</button>
            <button class="btn btn-pastel" onclick="nextSlide()">Siguiente</button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide2">
        <h3><i class="fas fa-lightbulb me-2 text-warning"></i> Patrones de Diseño</h3>
        <p>Son soluciones probadas a problemas comunes. No reinventamos la rueda, usamos la experiencia de expertos.</p>
        <div class="row g-2">
            <div class="col-6"><span class="pattern-badge">Singleton</span>: Asegura una única instancia global.</div>
            <div class="col-6"><span class="pattern-badge">Composite</span>: Trata objetos simples y compuestos igual.</div>
            <div class="col-6"><span class="pattern-badge">State</span>: Cambia el comportamiento según el estado interno.</div>
            <div class="col-6"><span class="pattern-badge">Observer</span>: Notifica cambios a múltiples interesados.</div>
        </div>
        <div class="analogy-box">
            <i class="fas fa-tools me-2"></i><strong>Analogía:</strong> En cocina, un **patrón** es como una receta básica (ej: sofrito). No importa qué plato hagas, si necesitas una base de sabor, usas esa técnica que ya sabes que funciona.
        </div>
        <div class="mt-4 text-center">
            <button class="btn btn-pastel" onclick="prevSlide()">Atrás</button>
            <button class="btn btn-pastel" onclick="nextSlide()">Siguiente</button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide3">
        <h3><i class="fas fa-bell me-2 text-danger"></i> Patrón Observer</h3>
        <p>Define una dependencia uno-a-muchos. Cuando el objeto principal (Subject) cambia, todos sus dependientes (Observers) son avisados automáticamente.</p>
        <div class="p-3 border rounded" style="background-color: var(--pastel-green);">
            <strong>Beneficio:</strong> Bajo acoplamiento. El Subject no necesita saber quiénes son sus observadores, solo que cumplen una interfaz.
        </div>
        <div class="analogy-box">
            <i class="fas fa-rss me-2"></i><strong>Analogía:</strong> Una **red social**. Tú eres el Subject. Tus seguidores son los Observers. Cuando publicas algo, todos reciben una notificación sin que tú tengas que avisarles uno por uno.
        </div>
        <div class="mt-4 text-center">
            <button class="btn btn-pastel" onclick="prevSlide()">Atrás</button>
            <button class="btn btn-pastel" onclick="nextSlide()">Siguiente</button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide4">
        <div class="text-center">
            <i class="fas fa-medal mb-3" style="font-size: 3rem; color: #ffca28;"></i>
            <h3>Evaluación de Diseño</h3>
            <p>¿Listo para demostrar que puedes estructurar una solución profesional?</p>
            <button class="btn btn-pastel btn-lg" onclick="startQuiz()">Empezar Test</button>
            <hr>
            <button class="btn btn-link text-secondary" onclick="goToSlide(0)">Reiniciar</button>
        </div>
    </div>
</div>

<div class="nav-dots">
    <div class="dot active" onclick="goToSlide(0)"></div>
    <div class="dot" onclick="goToSlide(1)"></div>
    <div class="dot" onclick="goToSlide(2)"></div>
    <div class="dot" onclick="goToSlide(3)"></div>
    <div class="dot" onclick="goToSlide(4)"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    let currentSlide = 0;
    const totalSlides = 5;

    function updateSlides() {
        document.querySelectorAll('.card-slide').forEach((s, i) => s.classList.toggle('active', i === currentSlide));
        document.querySelectorAll('.dot').forEach((d, i) => d.classList.toggle('active', i === currentSlide));
    }

    function nextSlide() { if(currentSlide < totalSlides-1) { currentSlide++; updateSlides(); } }
    function prevSlide() { if(currentSlide > 0) { currentSlide--; updateSlides(); } }
    function goToSlide(n) { currentSlide = n; updateSlides(); }

    async function startQuiz() {
        const questions = [
            { 
                q: "¿Qué diagrama ilustra la estructura final con operaciones y navegabilidades?", 
                opts: { a: "Diagrama de Casos de Uso", b: "DCD (Clases de Diseño)", c: "DSS" }, 
                ans: "b" 
            },
            { 
                q: "¿Qué patrón usarías para que muchos objetos se enteren cuando uno cambia?", 
                opts: { a: "Observer", b: "Singleton", c: "Composite" }, 
                ans: "a" 
            },
            { 
                q: "El patrón Singleton garantiza que una clase tenga...", 
                opts: { a: "Muchas subclases", b: "Una sola instancia", c: "Atributos públicos" }, 
                ans: "b" 
            },
            { 
                q: "¿Qué patrón permite tratar de igual forma a un objeto individual y a una estructura de objetos?", 
                opts: { a: "State", b: "Observer", c: "Composite" }, 
                ans: "c" 
            },
            { 
                q: "En el DCD, ¿de dónde surgen principalmente las operaciones de las clases?", 
                opts: { a: "De los mensajes en Diagramas de Comunicación", b: "Del Modelo de Dominio", c: "De los requerimientos no funcionales" }, 
                ans: "a" 
            }
        ];

        let hits = 0;
        let summaryHTML = '<div style="text-align:left;"><hr>';

        for (let i = 0; i < questions.length; i++) {
            const { value: userAns } = await Swal.fire({
                title: `Pregunta ${i+1}/5`,
                text: questions[i].q,
                input: 'radio',
                inputOptions: questions[i].opts,
                confirmButtonColor: '#b2d8d8'
            });
            if (userAns === questions[i].ans) hits++;
            summaryHTML += `<p>${userAns === questions[i].ans ? '✅' : '❌'} P${i+1}: ${questions[i].opts[questions[i].ans]}</p>`;
        }

        Swal.fire({
            title: `Puntaje: ${hits}/5`,
            html: summaryHTML + '</div>',
            icon: hits >= 3 ? 'success' : 'info',
            confirmButtonText: 'Finalizar',
            confirmButtonColor: '#b2d8d8'
        }).then(() => window.location.href = '../index.html');
    }
</script>

</body>
</html>