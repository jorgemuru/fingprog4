<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P4 - Semana 8: Diseño y Diagramas de Comunicación</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --pastel-blue: #ebf4f6;
            --pastel-pink: #f9f1f0;
            --pastel-green: #e8f5e9;
            --pastel-yellow: #fff9e6;
            --accent-blue: #b2d8d8;
            --text-color: #555;
        }

        body { font-family: 'Quicksand', sans-serif; background-color: var(--pastel-blue); color: var(--text-color); }
        .slide-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .card-slide { background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); max-width: 850px; width: 100%; padding: 40px; border: none; display: none; }
        .card-slide.active { display: block; }
        .btn-pastel { background-color: var(--accent-blue); border: none; color: white; padding: 10px 25px; border-radius: 50px; transition: all 0.3s; }
        .btn-pastel:hover { background-color: #96c9c9; transform: scale(1.05); }
        .analogy-box { background-color: var(--pastel-yellow); border-left: 5px solid #f0ad4e; padding: 15px; margin-top: 20px; border-radius: 0 10px 10px 0; font-size: 0.95rem; }
        .nav-dots { position: fixed; bottom: 20px; width: 100%; display: flex; justify-content: center; gap: 10px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; background: #ccc; cursor: pointer; }
        .dot.active { background: var(--accent-blue); }
        .concept-highlight { background-color: var(--pastel-pink); padding: 5px 10px; border-radius: 8px; font-weight: bold; }
    </style>
</head>
<body>

<div class="slide-container">
    <div class="card-slide active animate__animated animate__fadeIn" id="slide0">
        <div class="text-center">
            <div class="mb-3" style="font-size: 4rem; color: var(--accent-blue);">
                <i class="fas fa-drafting-compass"></i>
            </div>
            <h1 class="fw-bold">Programación 4</h1>
            <p class="lead">Semana 8: El Paso al Diseño</p>
            <hr class="my-4">
            <p>Ya sabemos <strong>qué</strong> debe hacer el sistema (Análisis). Ahora definiremos <strong>cómo</strong> lo hace internamente.</p>
            <button class="btn btn-pastel mt-3" onclick="nextSlide()">Comenzar Diseño <i class="fas fa-chevron-right ms-2"></i></button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide1">
        <h3><i class="fas fa-puzzle-piece me-2 text-primary"></i> ¿Qué hacemos en Diseño?</h3>
        <p>El diseño de bajo nivel consiste en identificar los objetos que participarán en la solución y definir sus interacciones.</p>
        <ul>
            <li><strong>Asignación de Responsabilidades:</strong> Decidir qué objeto hace cada tarea.</li>
            <li><strong>Interacción:</strong> Los objetos colaboran enviándose mensajes.</li>
        </ul>
        <div class="analogy-box">
            <i class="fas fa-theater-masks me-2"></i><strong>Analogía:</strong> En el Análisis sabíamos que la obra de teatro debía tratar de amor. En el **Diseño**, elegimos a los actores, les damos sus guiones y les decimos quién habla con quién en cada escena.
        </div>
        <div class="mt-4 text-center">
            <button class="btn btn-pastel" onclick="prevSlide()">Atrás</button>
            <button class="btn btn-pastel" onclick="nextSlide()">Siguiente</button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide2">
        <h3><i class="fas fa-comments me-2 text-success"></i> Diagramas de Comunicación</h3>
        <p>Son diagramas de interacción que resaltan la **organización de los objetos** que participan en un intercambio de mensajes.</p>
        <div class="p-3 rounded mb-3" style="background-color: var(--pastel-green);">
            <p class="mb-0"><strong>Elementos clave:</strong></p>
            <ul class="mb-0">
                <li><span class="concept-highlight">Links:</span> Líneas que conectan objetos (necesarios para enviar mensajes).</li>
                <li><span class="concept-highlight">Mensajes:</span> Flechas con números (1, 1.1, 2...) que indican el orden de las llamadas.</li>
            </ul>
        </div>
        <div class="analogy-box">
            <i class="fas fa-phone-alt me-2"></i><strong>Analogía:</strong> Imagina una red de oficinas. El link es el cable del teléfono. El mensaje es la llamada. Los números del diagrama son como los pasos de un manual: "Paso 1: Llamar a contabilidad. Paso 2: Contabilidad llama al banco".
        </div>
        <div class="mt-4 text-center">
            <button class="btn btn-pastel" onclick="prevSlide()">Atrás</button>
            <button class="btn btn-pastel" onclick="nextSlide()">Siguiente</button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide3">
        <h3><i class="fas fa-edit me-2 text-warning"></i> Notación Específica</h3>
        <p>Para que el diseño sea claro, usamos símbolos especiales:</p>
        <div class="row">
            <div class="col-md-6">
                <div class="p-3 border rounded h-100">
                    <strong>Creación de objetos:</strong><br>
                    Se usa el mensaje <code style="color: #d63384;"><<create>></code>.
                </div>
            </div>
            <div class="col-md-6">
                <div class="p-3 border rounded h-100">
                    <strong>Multiobjetos:</strong><br>
                    Representan una colección de objetos (como un Set o List).
                </div>
            </div>
        </div>
        <div class="mt-3 p-3 rounded" style="background-color: var(--pastel-blue);">
            <p class="small mb-0"><strong>Importante:</strong> Los diagramas de comunicación son semánticamente equivalentes a los de secuencia, pero se enfocan más en los enlaces físicos entre objetos.</p>
        </div>
        <div class="mt-4 text-center">
            <button class="btn btn-pastel" onclick="prevSlide()">Atrás</button>
            <button class="btn btn-pastel" onclick="nextSlide()">Siguiente</button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide4">
        <div class="text-center">
            <i class="fas fa-check-circle mb-3" style="font-size: 3rem; color: #b2d8d8;"></i>
            <h3>Mini-Desafío Semana 8</h3>
            <p>¿Estás listo para diseñar interacciones?</p>
            <button class="btn btn-pastel btn-lg" onclick="startQuiz()">Comenzar Test</button>
            <hr>
            <button class="btn btn-link text-secondary" onclick="goToSlide(0)">Reiniciar presentación</button>
        </div>
    </div>
</div>

<div class="nav-dots">
    <div class="dot active" onclick="goToSlide(0)"></div>
    <div class="dot" onclick="goToSlide(1)"></div>
    <div class="dot" onclick="goToSlide(2)"></div>
    <div class="dot" onclick="goToSlide(3)"></div>
    <div class="dot" onclick="goToSlide(4)"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    let currentSlide = 0;
    const totalSlides = 5;

    function updateSlides() {
        document.querySelectorAll('.card-slide').forEach((s, i) => s.classList.toggle('active', i === currentSlide));
        document.querySelectorAll('.dot').forEach((d, i) => d.classList.toggle('active', i === currentSlide));
    }

    function nextSlide() { if(currentSlide < totalSlides-1) { currentSlide++; updateSlides(); } }
    function prevSlide() { if(currentSlide > 0) { currentSlide--; updateSlides(); } }
    function goToSlide(n) { currentSlide = n; updateSlides(); }

    async function startQuiz() {
        const questions = [
            { 
                q: "¿Qué diagrama de interacción resalta la organización de los objetos mediante enlaces (links)?", 
                opts: { a: "Secuencia", b: "Comunicación", c: "Casos de Uso" }, 
                ans: "b" 
            },
            { 
                q: "Para enviar un mensaje de un objeto A a un objeto B, ¿qué debe existir entre ellos?", 
                opts: { a: "Un contrato", b: "Un link (enlace)", c: "Un atributo privado" }, 
                ans: "b" 
            },
            { 
                q: "¿Cómo se indica el orden de los mensajes en un diagrama de comunicación?", 
                opts: { a: "Por la altura de la flecha", b: "Mediante números de secuencia", c: "Por el color del link" }, 
                ans: "b" 
            },
            { 
                q: "¿Qué representa un 'Multiobjeto' en estos diagramas?", 
                opts: { a: "Un objeto muy grande", b: "Una colección de instancias", c: "Un error de diseño" }, 
                ans: "b" 
            },
            { 
                q: "El mensaje especial para instanciar un nuevo objeto es:", 
                opts: { a: "new()", b: "<<create>>", c: "init()" }, 
                ans: "b" 
            }
        ];

        let hits = 0;
        let summaryHTML = '<div style="text-align:left;"><hr>';

        for (let i = 0; i < questions.length; i++) {
            const { value: userAns } = await Swal.fire({
                title: `Pregunta ${i+1}/5`,
                text: questions[i].q,
                input: 'radio',
                inputOptions: questions[i].opts,
                confirmButtonColor: '#b2d8d8'
            });

            if (userAns === questions[i].ans) hits++;
            summaryHTML += `<p>${userAns === questions[i].ans ? '✅' : '❌'} P${i+1}: ${questions[i].opts[questions[i].ans]}</p>`;
        }

        Swal.fire({
            title: `Resultado: ${hits}/5`,
            html: summaryHTML + '</div>',
            icon: hits >= 3 ? 'success' : 'info',
            confirmButtonText: 'Finalizar',
            confirmButtonColor: '#b2d8d8'
        }).then(() => window.location.href = '../index.html');
    }
</script>

</body>
</html>