<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Programaci√≥n 4 ¬∑ M√≥dulo 3</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    :root{
      --bg:#fbfbff; --ink:#223; --muted:#566; --stroke:#e8e7ff;
      --p1:#dff3ff; --p2:#ffe6ef; --p3:#e9ffe6; --p4:#fff6d6;
      --accent:#6a6cff; --accent2:#ff6aa2;
      --shadow:0 12px 30px rgba(30,30,60,.08); --radius:18px;
    }
    body{
      background:
        radial-gradient(1200px 800px at 10% 10%, var(--p1), transparent 55%),
        radial-gradient(1100px 700px at 90% 15%, var(--p2), transparent 60%),
        radial-gradient(900px 700px at 20% 90%, var(--p3), transparent 55%),
        radial-gradient(1000px 700px at 80% 85%, var(--p4), transparent 60%),
        var(--bg);
      color:var(--ink); min-height:100vh;
    }
    .app-shell{display:grid;grid-template-columns:320px 1fr;gap:18px;padding:18px;max-width:1450px;margin:0 auto;}
    @media (max-width:992px){.app-shell{grid-template-columns:1fr}.sidebar{position:static!important;height:auto!important}}
    .sidebar{
      position:sticky;top:18px;height:calc(100vh - 36px);overflow:auto;
      border:1px solid var(--stroke);background:linear-gradient(180deg,#ffffffcc,#ffffff99);
      box-shadow:var(--shadow);border-radius:var(--radius);padding:14px;backdrop-filter:blur(8px);
    }
    .brand{border-radius:14px;padding:12px;background:linear-gradient(135deg,rgba(106,108,255,.14),rgba(255,106,162,.12));border:1px solid var(--stroke);}
    .brand .title{font-weight:900;letter-spacing:.2px;margin:0;line-height:1.2}
    .brand .subtitle{margin:6px 0 0 0;color:var(--muted);font-size:.92rem}
    .navpill{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:14px;border:1px solid transparent;color:var(--ink);text-decoration:none;transition:.18s ease;margin:6px 0;background:rgba(255,255,255,.55);}
    .navpill:hover{transform:translateY(-1px);border-color:var(--stroke)}
    .navpill.active{border-color:rgba(106,108,255,.35);background:rgba(106,108,255,.10)}
    .navpill i{color:var(--accent);width:18px;text-align:center}
    .content{
      border:1px solid var(--stroke);background:linear-gradient(180deg,#ffffffcc,#ffffffa6);
      box-shadow:var(--shadow);border-radius:var(--radius);padding:16px;backdrop-filter:blur(8px);overflow:hidden;
    }
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:4px 4px 12px;border-bottom:1px solid var(--stroke);margin-bottom:12px;}
    .progress{height:10px;border-radius:999px;background:rgba(106,108,255,.08)}
    .progress-bar{background:linear-gradient(90deg,rgba(106,108,255,.85),rgba(255,106,162,.75))}
    .slide{display:none;padding:8px 6px 14px;min-height:60vh}
    .slide.active{display:block}
    .slide h2{font-weight:900;letter-spacing:.2px;margin-bottom:10px}
    .slide p,.slide li{color:var(--muted)}
    .card-soft{border:1px solid var(--stroke);background:rgba(255,255,255,.70);border-radius:var(--radius);box-shadow:0 10px 22px rgba(30,30,60,.06)}
    .badge-soft{border:1px solid var(--stroke);background:rgba(255,255,255,.60);color:var(--ink);border-radius:999px;padding:6px 10px;font-size:.82rem}
    .callout{border-left:6px solid rgba(106,108,255,.55);background:rgba(106,108,255,.06);border-radius:14px;padding:12px}
    .callout .k{font-weight:800;color:var(--ink)}
    .analogy{border-left:6px solid rgba(255,106,162,.55);background:rgba(255,106,162,.06);border-radius:14px;padding:12px}
    .analogy .k{font-weight:800;color:var(--ink)}
    .btn-soft{border-radius:999px;border:1px solid rgba(106,108,255,.25);background:rgba(106,108,255,.08);color:var(--ink)}
    .btn-soft:hover{background:rgba(106,108,255,.14)}
    .btn-accent{border-radius:999px;background:linear-gradient(90deg,rgba(106,108,255,.95),rgba(255,106,162,.85));border:none}
    .btn-accent:hover{filter:brightness(1.03)}
    code.kbd{background:rgba(0,0,0,.06);padding:2px 6px;border-radius:10px;border:1px solid rgba(0,0,0,.06)}
    .quiz-option{border:1px solid var(--stroke);background:rgba(255,255,255,.62);border-radius:16px;padding:10px 12px;cursor:pointer;transition:.15s ease}
    .quiz-option:hover{transform:translateY(-1px);border-color:rgba(106,108,255,.35)}
    .quiz-option.selected{border-color:rgba(255,106,162,.55);background:rgba(255,106,162,.08)}
    .quiz-option.correct{border-color:rgba(50,180,90,.55);background:rgba(50,180,90,.10)}
    .quiz-option.wrong{border-color:rgba(220,60,90,.55);background:rgba(220,60,90,.10)}
    .small-muted{color:var(--muted);font-size:.92rem}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  </style>
</head>
<body>
  <div class="app-shell">
    <aside class="sidebar">
      <div class="brand animate__animated animate__fadeIn">
        <div class="d-flex align-items-center gap-2">
          <div class="p-2 rounded-3" style="background:rgba(106,108,255,.12); border:1px solid var(--stroke)">
            <i class="fa-solid fa-diagram-next" style="color:var(--accent)"></i>
          </div>
          <div>
            <p class="title mb-0">P4 ¬∑ M√≥dulo 3</p>
            <p class="subtitle mb-0">An√°lisis: Comportamiento del Sistema</p>
          </div>
        </div>
      </div>

      <div class="mt-3">
        <div class="d-flex align-items-center justify-content-between">
			<a href="../index.html"
			   class="badge-soft text-decoration-none">
			   <i class="fa-solid fa-house me-2"></i>Home
			</a>
          <button class="btn btn-sm btn-soft" id="btnHelp">
            <i class="fa-regular fa-circle-question me-1"></i>Ayuda
          </button>
        </div>
        <div id="nav" class="mt-2"></div>
      </div>

      <div class="mt-3">
        <div class="card-soft p-3">
          <div class="d-flex align-items-start gap-2">
            <i class="fa-solid fa-lightbulb mt-1" style="color:var(--accent2)"></i>
            <div>
              <div class="fw-bold">Tip</div>
              <div class="small-muted">
                Pens√° el sistema como <b>caja negra</b>: definimos qu√© hace ante cada mensaje.
                El <i>c√≥mo</i> se define en Dise√±o.
              </div>
            </div>
          </div>
        </div>
      </div>
    </aside>

    <main class="content">
      <div class="topbar">
        <div>
          <div class="d-flex align-items-center gap-2">
            <span class="badge-soft" id="slideTag"><i class="fa-solid fa-layer-group me-2"></i>Secci√≥n</span>
            <span class="badge-soft" id="slideCounter"><i class="fa-solid fa-hashtag me-2"></i>1/1</span>
          </div>
          <div class="mt-2">
            <div class="progress">
              <div class="progress-bar" id="progressBar" style="width:0%"></div>
            </div>
          </div>
        </div>
        <div class="d-flex gap-2">
          <button class="btn btn-soft" id="btnPrev"><i class="fa-solid fa-arrow-left me-2"></i>Anterior</button>
          <button class="btn btn-accent text-white" id="btnNext">Siguiente<i class="fa-solid fa-arrow-right ms-2"></i></button>
        </div>
      </div>

      <section class="slide" data-title="Bienvenida" data-icon="fa-hand-sparkles">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-hand-sparkles me-2" style="color:var(--accent2)"></i>Bienvenida</h2>
          <p class="lead small-muted mb-3">
            Vamos a describir en forma precisa el <b>comportamiento esperado</b> del sistema:
            qu√© hace el sistema <b>ante cada mensaje</b> que recibe.
          </p>

          <div class="row g-3">
            <div class="col-lg-7">
              <div class="card-soft p-4 h-100">
                <div class="d-flex align-items-start gap-3">
                  <div class="p-3 rounded-4" style="background:rgba(106,108,255,.10); border:1px solid var(--stroke)">
                    <i class="fa-solid fa-bullseye fa-lg" style="color:var(--accent)"></i>
                  </div>
                  <div>
                    <div class="fw-bold mb-2">Objetivo</div>
                    <ul class="mb-0">
                      <li>Trabajar sobre el <b>Modelo de Casos de Uso</b>.</li>
                      <li>Ver al sistema como una unidad.</li>
                      <li>Definir <b>protocolos</b> por escenario.</li>
                      <li>Especificar comportamiento explicando cada mensaje.</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-5">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2"><i class="fa-solid fa-gamepad me-2" style="color:var(--accent)"></i>Modo interactivo</div>
                <ul class="mb-3">
                  <li>Barra lateral para saltar.</li>
                  <li><code class="kbd">‚Üê</code> y <code class="kbd">‚Üí</code> navegan.</li>
                  <li>Al final: <b>quiz de 10 preguntas</b>.</li>
                </ul>
                <button class="btn btn-soft w-100" onclick="toast('¬°Listo! Empecemos üôÇ')">
                  <i class="fa-solid fa-play me-2"></i>Probar interacci√≥n
                </button>
              </div>
            </div>
          </div>

          <div class="callout mt-3">
            <span class="k">Enfoque:</span> nos concentramos en <b>qu√©</b> hace el sistema; el <b>c√≥mo</b> se define en Dise√±o.
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> reglas de una m√°quina expendedora: defin√≠s ‚Äúsi pasa X, debe responder Y‚Äù, sin explicar el mecanismo interno.
            <button class="btn btn-sm btn-soft mt-2" onclick="analogy('Caja negra','Como una m√°quina expendedora: defin√≠s respuestas ante acciones del usuario, sin detallar su mecanismo interno.')">
              <i class="fa-solid fa-mug-saucer me-2"></i>Popup
            </button>
          </div>
        </div>
      </section>

      <section class="slide" data-title="Modelo de Casos de Uso" data-icon="fa-sitemap">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-sitemap me-2" style="color:var(--accent)"></i>Modelo de Casos de Uso</h2>
          <p class="small-muted">
            Contenido t√≠pico: introducci√≥n, relevamiento, actores, casos de uso, relaciones y ‚ÄúComportamiento‚Äù.
          </p>

          <div class="row g-3">
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Incluye</div>
                <ul class="mb-0">
                  <li><b>Introducci√≥n</b> (texto breve).</li>
                  <li><b>Relevamiento</b> (secuencias t√≠picas, funciones no capturadas, etc.).</li>
                  <li><b>Actores</b>, <b>Casos de uso</b>, <b>Relaciones</b>.</li>
                </ul>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Secci√≥n ‚ÄúComportamiento‚Äù</div>
                <ul class="mb-0">
                  <li>Se especifica con <b>Eventos del Sistema</b> y <b>Contratos de Software</b>.</li>
                  <li>Los <b>DSS</b> se incluyen aqu√≠.</li>
                </ul>
                <div class="callout mt-3"><span class="k">Idea:</span> convertimos historias en especificaci√≥n t√©cnica.</div>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> como un manual: qui√©n lo usa, para qu√©, y c√≥mo ‚Äúconversa‚Äù con el sistema.
          </div>
        </div>
      </section>

      <section class="slide" data-title="La Clase Sistema" data-icon="fa-cube">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-cube me-2" style="color:var(--accent2)"></i>La Clase Sistema</h2>
          <p>En esta actividad el sistema se considera un <b>objeto</b>: una √∫nica instancia de la ‚ÄúClase Sistema‚Äù.</p>

          <div class="row g-3">
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">¬øQu√© tiene?</div>
                <ul class="mb-0">
                  <li><b>Operaciones</b> (recibe mensajes).</li>
                  <li><b>Estado</b>.</li>
                  <li>Una sola instancia representa al sistema entero.</li>
                </ul>
                <div class="callout mt-3"><span class="k">Ojo:</span> en an√°lisis no se dise√±a la operaci√≥n, solo su efecto.</div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Estado del sistema</div>
                <ul class="mb-0">
                  <li>Configuraci√≥n de objetos v√°lida respecto al <b>Modelo de Dominio</b>.</li>
                  <li>Qu√© objetos existen y c√≥mo se conectan.</li>
                </ul>
                <div class="callout mt-3"><span class="k">Ejemplo mental:</span> Canci√≥n‚ÄìArtista‚ÄìG√©nero conectados.</div>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> un ‚Äúrecepcionista‚Äù: recibe pedidos y actualiza su agenda (estado), sin explicar a√∫n su trabajo interno.
          </div>
        </div>
      </section>

      <section class="slide" data-title="Interacciones y DSS" data-icon="fa-diagram-project">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-diagram-project me-2" style="color:var(--accent)"></i>Interacciones con el Sistema</h2>
          <p>Cada escenario se entiende como una interacci√≥n Actor ‚Üî Sistema, expresada con un <b>DSS</b>.</p>

          <div class="row g-3">
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">¬øQu√© define un DSS?</div>
                <ul class="mb-0">
                  <li>Instancias de actores y una instancia <span class="mono">:Sistema</span>.</li>
                  <li>Mensajes (operaciones del sistema) y respuestas.</li>
                  <li>Se enfoca en los mensajes que el sistema <b>recibe</b>.</li>
                </ul>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">¬øUno o varios DSS?</div>
                <ul class="mb-0">
                  <li>Puede ser por escenario o combinar varios.</li>
                  <li>Criterio: complejidad vs simplicidad del diagrama.</li>
                </ul>
                <div class="callout mt-3"><span class="k">Tip:</span> si queda sobrecargado, dividilo.</div>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> como un chat: registr√°s la conversaci√≥n ‚Äúusuario pide‚Äù y ‚Äúsistema responde‚Äù.
          </div>
        </div>
      </section>

      <section class="slide" data-title="Eventos y Operaciones" data-icon="fa-bolt">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-bolt me-2" style="color:var(--accent2)"></i>Eventos del Sistema y Operaciones</h2>
          <p>Evento del sistema: est√≠mulo externo generado por un actor, ante el cual el sistema debe reaccionar. Dispara una operaci√≥n del sistema.</p>

          <div class="row g-3">
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Evento del sistema</div>
                <ul class="mb-0">
                  <li>Externo + actor + relevante.</li>
                </ul>
                <div class="callout mt-3"><span class="k">Ejemplo:</span> ‚ÄúUsuario ingresa nombre y a√±o‚Äù ‚Üí s√≠.</div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">No todo evento externo cuenta</div>
                <ul class="mb-0">
                  <li>‚ÄúInicia sesi√≥n en el SO‚Äù puede no afectar al sistema ‚Üí no es evento del sistema.</li>
                </ul>
                <div class="callout mt-3"><span class="k">Pregunta gu√≠a:</span> ¬øes responsabilidad del sistema reaccionar?</div>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> un timbre: suena (evento) y alguien abre (reacci√≥n). El ‚Äúclima afuera‚Äù es externo pero no siempre dispara reacci√≥n.
          </div>
        </div>
      </section>

      <section class="slide" data-title="Par√°metros y retornos" data-icon="fa-sliders">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-sliders me-2" style="color:var(--accent)"></i>Par√°metros y retornos</h2>
          <p class="small-muted">Las operaciones pueden tener par√°metros. Sugerencia: retornar tipos primitivos o data types.</p>

          <div class="row g-3">
            <div class="col-lg-7">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Ejemplos</div>
                <div class="callout">
                  <div class="mono">
                    escribirEmail(cuerpo:String, asunto:String)<br/>
                    elegirContactos(contactos: Set(String))<br/>
                    listarCanciones(): Set(DataCancion)
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-5">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Por qu√© importa</div>
                <ul class="mb-0">
                  <li>Evita ambig√ºedades.</li>
                  <li>Evita el error de no indicar tipos/retornos.</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> tr√°mite: entreg√°s datos (par√°metros) y recib√≠s un comprobante (retorno).
          </div>
        </div>
      </section>

      <section class="slide" data-title="Notaci√≥n del DSS" data-icon="fa-pen-ruler">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-pen-ruler me-2" style="color:var(--accent2)"></i>Notaci√≥n del DSS</h2>
          <p class="small-muted">Elementos esenciales y fragmentos: loop, opt, alt, ref.</p>

          <div class="row g-3">
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Elementos</div>
                <ul class="mb-0">
                  <li>Actor y <span class="mono">:Sistema</span>.</li>
                  <li>Mensajes (operaciones) y retornos.</li>
                  <li>Tiempo hacia abajo.</li>
                </ul>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Fragmentos</div>
                <ul class="mb-0">
                  <li><span class="mono">loop [criterio]</span> repetici√≥n</li>
                  <li><span class="mono">opt [condici√≥n]</span> opcional</li>
                  <li><span class="mono">alt / else</span> alternativas</li>
                  <li><span class="mono">ref</span> referencia</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> como receta: repet√≠, opcional, o alternativas seg√∫n condici√≥n.
          </div>
        </div>
      </section>

      <section class="slide" data-title="L√≠mite y memoria" data-icon="fa-border-all">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-border-all me-2" style="color:var(--accent)"></i>L√≠mite del sistema y memoria</h2>
          <p class="small-muted">Pensar el l√≠mite ayuda a identificar eventos. Adem√°s el sistema puede tener o no memoria.</p>

          <div class="row g-3">
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">L√≠mite</div>
                <ul class="mb-0">
                  <li>Busc√° lo que ocurre fuera y atraviesa el l√≠mite.</li>
                  <li>¬øEs externo? ¬øDebe reaccionar el sistema?</li>
                </ul>
                <div class="callout mt-3"><span class="k">Ejemplo:</span> ‚ÄúCajero ingresa c√≥digo‚Äù s√≠, ‚Äúcliente elige producto‚Äù no.</div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Memoria</div>
                <ul class="mb-0">
                  <li><b>Sin memoria</b>: mensajes independientes.</li>
                  <li><b>Con memoria</b>: mensajes dependen de info previa (se indica con notas/nombre).</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> un cajero autom√°tico recuerda tu sesi√≥n luego del PIN (con memoria).
          </div>
        </div>
      </section>

      <section class="slide" data-title="Errores comunes (DSS)" data-icon="fa-triangle-exclamation">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-triangle-exclamation me-2" style="color:var(--accent2)"></i>Errores comunes en DSS</h2>
          <div class="row g-3">
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Cuidado con‚Ä¶</div>
                <ul class="mb-0">
                  <li>Enviar mensajes hacia el usuario.</li>
                  <li>No indicar memoria.</li>
                  <li>No especificar data types.</li>
                </ul>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Y tambi√©n‚Ä¶</div>
                <ul class="mb-0">
                  <li>Sobrecargar un DSS pudiendo hacer varios.</li>
                  <li>No indicar tipo de par√°metros ni retorno.</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> un plano sobrecargado termina siendo dif√≠cil de leer.
          </div>
        </div>
      </section>

      <section class="slide" data-title="Contratos de Software" data-icon="fa-file-contract">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-file-contract me-2" style="color:var(--accent)"></i>Contratos de Software</h2>
          <p>Un contrato especifica el efecto de una operaci√≥n. Es declarativo (no da el algoritmo). Basado en ternas tipo Hoare.</p>

          <div class="row g-3">
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Hoare</div>
                <ul class="mb-0">
                  <li><span class="mono">{P} S {Q}</span></li>
                  <li>P = precondici√≥n, Q = postcondici√≥n.</li>
                  <li>S = programa (se dise√±a despu√©s).</li>
                </ul>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Consumidor / Proveedor</div>
                <ul class="mb-0">
                  <li>Consumidor cumple pre ‚áí puede exigir post.</li>
                  <li>Proveedor garantiza post solo si pre se cumpli√≥.</li>
                  <li>Si no hay pre ‚áí no hay garant√≠a (excepciones/resultado arbitrario).</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> garant√≠a: si us√°s seg√∫n condiciones (pre), te garantizan el resultado (post).
          </div>
        </div>
      </section>

      <section class="slide" data-title="Pre y Post (estado)" data-icon="fa-right-left">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-right-left me-2" style="color:var(--accent2)"></i>Pre y Post: estado del sistema</h2>
          <p class="small-muted">Se expresan en t√©rminos del estado antes/despu√©s, par√°metros y retorno (si existe).</p>

          <div class="row g-3">
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Precondici√≥n</div>
                <ul class="mb-0">
                  <li>Valores de par√°metros.</li>
                  <li>Estado previo: creaci√≥n/destrucci√≥n, conexi√≥n/desconexi√≥n, modificaci√≥n de atributos.</li>
                </ul>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Postcondici√≥n</div>
                <ul class="mb-0">
                  <li>Retorno (si aplica).</li>
                  <li>Estado final: qu√© objetos/links/atributos cambiaron.</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="callout mt-3"><span class="k">Clave:</span> dice qu√© cambia de œÉ1 a œÉ2, no c√≥mo se implementa.</div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> emitir certificado: pre = alumno existe; post = certificado creado y asociado al alumno.
          </div>
        </div>
      </section>

      <section class="slide" data-title="Estructura del contrato" data-icon="fa-list-check">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-list-check me-2" style="color:var(--accent)"></i>Estructura de un contrato</h2>
          <div class="row g-3">
            <div class="col-lg-7">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Partes</div>
                <ul class="mb-0">
                  <li>Firma, Par√°metros, Responsabilidades.</li>
                  <li>Referencias cruzadas (CU), Salida (si funci√≥n).</li>
                  <li>Precondici√≥n, Postcondici√≥n.</li>
                  <li>Snapshots (opcional): antes/despu√©s + invocaci√≥n concreta.</li>
                </ul>
              </div>
            </div>
            <div class="col-lg-5">
              <div class="card-soft p-4 h-100">
                <div class="fw-bold mb-2">Errores comunes</div>
                <ul class="mb-0">
                  <li>Invariantes como postcondiciones.</li>
                  <li>Omitir el resultado de una operaci√≥n como postcondici√≥n.</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="analogy mt-3">
            <span class="k">Analog√≠a:</span> contrato de alquiler: define condiciones antes/despu√©s y puede incluir ejemplos del estado.
          </div>
        </div>
      </section>

      <section class="slide" data-title="Desaf√≠o (10 preguntas)" data-icon="fa-circle-check">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-circle-check me-2" style="color:var(--accent2)"></i>Desaf√≠o final ¬∑ 10 preguntas</h2>
          <p class="small-muted">
            Eleg√≠ una opci√≥n por pregunta. Al finalizar ver√°s la correcta y tu respuesta por pregunta, y un resumen.
          </p>

          <div class="card-soft p-4">
            <div id="quizRoot"></div>
            <div class="d-flex flex-wrap gap-2 mt-3">
              <button class="btn btn-accent text-white" id="btnFinishQuiz">
                <i class="fa-solid fa-flag-checkered me-2"></i>Finalizar intento
              </button>
              <button class="btn btn-soft" id="btnResetQuiz">
                <i class="fa-solid fa-rotate-right me-2"></i>Reiniciar
              </button>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" data-title="Cierre" data-icon="fa-heart">
        <div class="animate__animated animate__fadeInUp">
          <h2><i class="fa-solid fa-heart me-2" style="color:var(--accent2)"></i>Cierre</h2>
          <div class="card-soft p-4">
            <div class="fw-bold mb-2">Checklist r√°pido</div>
            <ul class="mb-0">
              <li>Evento del sistema vs evento externo cualquiera.</li>
              <li>DSS para escenario t√≠pico.</li>
              <li>Memoria del sistema (s√≠/no y qu√© recuerda).</li>
              <li>Contrato: pre/post como garant√≠a del efecto.</li>
            </ul>
          </div>
          <div class="analogy mt-3">
            <span class="k">Idea final:</span> DSS = conversaci√≥n; Contrato = garant√≠a del efecto. Juntos definen el comportamiento esperado.
          </div>
        </div>
      </section>

    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const slides = Array.from(document.querySelectorAll('.slide'));
    const nav = document.getElementById('nav');
    const slideCounter = document.getElementById('slideCounter');
    const slideTag = document.getElementById('slideTag');
    const progressBar = document.getElementById('progressBar');
    let idx = 0;

    function renderNav(){
      nav.innerHTML = '';
      slides.forEach((s, i) => {
        const title = s.dataset.title || `Secci√≥n ${i+1}`;
        const icon = s.dataset.icon || 'fa-circle';
        const a = document.createElement('a');
        a.href = '#';
        a.className = 'navpill';
        a.innerHTML = `<i class="fa-solid ${icon}"></i><span>${title}</span>`;
        a.addEventListener('click', (e) => { e.preventDefault(); goTo(i, true); });
        nav.appendChild(a);
      });
    }

    function updateChrome(){
      const total = slides.length;
      slideCounter.innerHTML = `<i class="fa-solid fa-hashtag me-2"></i>${idx+1}/${total}`;
      slideTag.innerHTML = `<i class="fa-solid fa-layer-group me-2"></i>${slides[idx].dataset.title || 'Secci√≥n'}`;
      progressBar.style.width = `${Math.round(((idx+1)/total)*100)}%`;
      Array.from(nav.querySelectorAll('.navpill')).forEach((p, i) => p.classList.toggle('active', i === idx));
    }

    function goTo(newIdx, animate=false){
      if(newIdx < 0 || newIdx >= slides.length) return;
      slides[idx].classList.remove('active');
      idx = newIdx;
      slides[idx].classList.add('active');
      if(animate){
        slides[idx].classList.remove('animate__fadeInUp');
        void slides[idx].offsetWidth;
        slides[idx].classList.add('animate__animated','animate__fadeInUp');
      }
      updateChrome();
      window.scrollTo({top:0, behavior:'smooth'});
    }
    function next(){ goTo(Math.min(idx+1, slides.length-1), true); }
    function prev(){ goTo(Math.max(idx-1, 0), true); }

    document.getElementById('btnNext').addEventListener('click', next);
    document.getElementById('btnPrev').addEventListener('click', prev);
    document.addEventListener('keydown', (e) => {
      if(e.key === 'ArrowRight') next();
      if(e.key === 'ArrowLeft') prev();
    });

    document.getElementById('btnHelp').addEventListener('click', () => {
      Swal.fire({
        title: 'C√≥mo usar esta presentaci√≥n',
        html: `<div style="text-align:left">
          <ul>
            <li>Us√° <b>Siguiente</b>/<b>Anterior</b> o <code>‚Üí</code>/<code>‚Üê</code>.</li>
            <li>Barra lateral para saltar a cualquier tema.</li>
            <li>Al final: <b>quiz</b> de 10 preguntas con correcci√≥n y resumen.</li>
          </ul>
        </div>`,
        icon: 'info',
        confirmButtonText: '¬°Entendido!',
        confirmButtonColor: '#6a6cff'
      })
    });

    function analogy(title, text){
      Swal.fire({ title: `Analog√≠a ¬∑ ${title}`, text, icon: 'success', confirmButtonText: 'Ok', confirmButtonColor: '#6a6cff' });
    }
    function toast(text){
      Swal.fire({ toast:true, position:'top-end', icon:'info', title:text, showConfirmButton:false, timer:2200, timerProgressBar:true });
    }

    const quiz = [
      { q:"¬øCu√°l es el objetivo de esta actividad de an√°lisis?",
        options:["Definir el algoritmo exacto de cada operaci√≥n","Describir qu√© debe hacer el sistema ante cada mensaje","Elegir tecnolog√≠a de base de datos","Optimizar performance"],
        correct:1,
        explain:"Se define el comportamiento esperado ante mensajes; el c√≥mo se resuelve internamente se decide en Dise√±o."
      },
      { q:"En esta actividad el sistema se considera como‚Ä¶",
        options:["Un conjunto de microservicios ya dise√±ados","Una √∫nica instancia de la clase Sistema","Un actor externo","Una tabla de base de datos"],
        correct:1,
        explain:"Se asume una clase Sistema con una √∫nica instancia que representa al sistema entero."
      },
      { q:"¬øQu√© es un evento del sistema?",
        options:["Cualquier evento externo","Est√≠mulo externo de un actor ante el cual el sistema debe reaccionar","Un m√©todo privado","Un atributo derivado"],
        correct:1,
        explain:"Debe ser externo, generado por un actor y relevante para el sistema."
      },
      { q:"Los eventos del sistema disparan‚Ä¶",
        options:["Clases del dominio","Operaciones del sistema","Interfaces gr√°ficas","Casos de prueba"],
        correct:1,
        explain:"Cada evento del sistema dispara una operaci√≥n del sistema ejecutada por la instancia :Sistema."
      },
      { q:"Un DSS sirve para‚Ä¶",
        options:["Dise√±ar la estructura interna de clases","Definir la interacci√≥n entre actores y el sistema en escenarios de un caso de uso","Crear el modelo de dominio","Definir la BD f√≠sica"],
        correct:1,
        explain:"El DSS representa la conversaci√≥n actor‚Üîsistema (mensajes y respuestas) por escenario."
      },
      { q:"Sugerencia del material: las operaciones del sistema deber√≠an retornar‚Ä¶",
        options:["Objetos del dominio con links","Tipos primitivos o data types","Siempre void","Solo enteros"],
        correct:1,
        explain:"Se recomienda retornar tipos primitivos o data types, no objetos del dominio."
      },
      { q:"¬øQu√© implica que el sistema tenga memoria?",
        options:["Que guarda logs","Que mensajes posteriores pueden depender de informaci√≥n previa","Que no tiene estado","Que siempre responde igual"],
        correct:1,
        explain:"Con memoria, el sistema recuerda informaci√≥n de estados previos que afecta mensajes posteriores."
      },
      { q:"¬øQu√© es un contrato de software?",
        options:["Un diagrama de clases","Una especificaci√≥n declarativa del efecto (pre/post) de una operaci√≥n","Una lista de pantallas","Un algoritmo detallado"],
        correct:1,
        explain:"El contrato dice qu√© debe cumplirse (efecto), no el algoritmo de implementaci√≥n."
      },
      { q:"Si NO se cumple la precondici√≥n, entonces‚Ä¶",
        options:["El proveedor garantiza igual la postcondici√≥n","No se garantiza correctitud del resultado","La operaci√≥n se vuelve m√°s r√°pida","El sistema se apaga"],
        correct:1,
        explain:"Si la pre no se satisface, el proveedor no garantiza la postcondici√≥n."
      },
      { q:"¬øCu√°l es un error com√∫n en contratos seg√∫n el material?",
        options:["Especificar par√°metros","Incluir invariantes como postcondiciones u omitir el resultado como postcondici√≥n","Usar nombres claros","Separar contratos por operaci√≥n"],
        correct:1,
        explain:"Errores comunes: invariantes como postcondiciones y omitir el resultado/retorno."
      }
    ];

    const state = { answers: Array(quiz.length).fill(null), finished:false };

    function renderQuiz(){
      const root = document.getElementById('quizRoot');
      root.innerHTML = '';
      quiz.forEach((item, qi) => {
        const block = document.createElement('div');
        block.className = 'mb-4';
        block.innerHTML = `
          <div class="d-flex align-items-start justify-content-between gap-2">
            <div class="fw-bold">${qi+1}. ${item.q}</div>
            <span class="badge-soft"><i class="fa-solid fa-list-check me-2"></i>MCQ</span>
          </div>
          <div class="mt-2 d-grid gap-2" id="q-${qi}"></div>
          <div class="small-muted mt-2" id="exp-${qi}" style="display:none"></div>
        `;
        root.appendChild(block);

        const optWrap = block.querySelector(`#q-${qi}`);
        item.options.forEach((opt, oi) => {
          const optDiv = document.createElement('div');
          optDiv.className = 'quiz-option';
          optDiv.innerHTML = `<i class="fa-regular fa-circle me-2"></i>${opt}`;
          optDiv.addEventListener('click', () => {
            if(state.finished) return;
            state.answers[qi] = oi;
            refreshQuestion(qi);
          });
          optWrap.appendChild(optDiv);
        });

        refreshQuestion(qi);
      });
    }

    function refreshQuestion(qi){
      const optWrap = document.getElementById(`q-${qi}`);
      const item = quiz[qi];
      const chosen = state.answers[qi];

      Array.from(optWrap.children).forEach((node, oi) => {
        node.classList.toggle('selected', chosen === oi);
        node.querySelector('i').className = chosen === oi ? 'fa-solid fa-circle-check me-2' : 'fa-regular fa-circle me-2';
        node.classList.remove('correct','wrong');
        if(state.finished){
          if(oi === item.correct) node.classList.add('correct');
          if(chosen === oi && chosen !== item.correct) node.classList.add('wrong');
        }
      });

      const exp = document.getElementById(`exp-${qi}`);
      if(state.finished){
        exp.style.display = '';
        const selText = (chosen === null) ? 'Sin responder' : item.options[chosen];
        exp.innerHTML = `
          <div class="callout">
            <div><b>Correcta:</b> ${item.options[item.correct]}</div>
            <div><b>Tu respuesta:</b> ${selText}</div>
            <div class="mt-2">${item.explain}</div>
          </div>
        `;
      }else{
        exp.style.display = 'none';
        exp.innerHTML = '';
      }
    }

    function finishQuiz(){
      const unanswered = state.answers.filter(a => a === null).length;
      if(unanswered){
        Swal.fire({
          title:'Te faltan preguntas',
          text:`Te faltan ${unanswered} preguntas sin responder. ¬øQuer√©s finalizar igual?`,
          icon:'warning',
          showCancelButton:true,
          confirmButtonText:'Finalizar igual',
          cancelButtonText:'Volver',
          confirmButtonColor:'#ff6aa2'
        }).then(r => { if(r.isConfirmed) doFinish(); });
      }else{
        doFinish();
      }
    }

    function doFinish(){
      state.finished = true;
      for(let i=0;i<quiz.length;i++) refreshQuestion(i);

      const correctCount = state.answers.reduce((acc,a,i)=> acc + (a===quiz[i].correct ? 1 : 0), 0);
      const total = quiz.length;

      let perQ = '';
      for(let i=0;i<total;i++){
        const chosen = state.answers[i];
        const ok = (chosen === quiz[i].correct);
        perQ += `<div style="text-align:left; margin-bottom:10px;">
          <div><b>${i+1}. ${ok ? '‚úÖ Correcto' : '‚ùå Incorrecto'}</b></div>
          <div><b>Correcta:</b> ${quiz[i].options[quiz[i].correct]}</div>
          <div><b>Tu respuesta:</b> ${chosen===null ? 'Sin responder' : quiz[i].options[chosen]}</div>
        </div>`;
      }

      Swal.fire({
        title:`Resultado: ${correctCount}/${total}`,
        html:`<div class="small-muted" style="text-align:left; margin-bottom:10px;">
                Detalle por pregunta (correcta vs tu respuesta):
              </div>
              <div style="max-height:52vh; overflow:auto; padding-right:6px;">${perQ}</div>
              <hr/>
              <div style="text-align:left;"><b>Resumen:</b> ${correctCount} correctas ¬∑ ${total-correctCount} incorrectas.</div>`,
        icon: correctCount >= 7 ? 'success' : 'info',
        confirmButtonText:'Ok',
        confirmButtonColor:'#6a6cff'
      });
    }

    function resetQuiz(){
      state.answers = Array(quiz.length).fill(null);
      state.finished = false;
      renderQuiz();
      toast('Quiz reiniciado.');
    }

    document.getElementById('btnFinishQuiz').addEventListener('click', finishQuiz);
    document.getElementById('btnResetQuiz').addEventListener('click', resetQuiz);

    renderNav();
    slides[0].classList.add('active');
    updateChrome();
    renderQuiz();
  </script>
</body>
</html>
