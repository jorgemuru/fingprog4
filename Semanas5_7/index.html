<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P4 - Semanas 5 a 7: Comportamiento y Contratos</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --pastel-blue: #ebf4f6;
            --pastel-pink: #f9f1f0;
            --pastel-green: #e8f5e9;
            --pastel-yellow: #fff9e6;
            --accent-blue: #b2d8d8;
            --text-color: #555;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--pastel-blue);
            color: var(--text-color);
        }

        .slide-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .card-slide {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            max-width: 850px;
            width: 100%;
            padding: 40px;
            border: none;
            display: none;
        }

        .card-slide.active {
            display: block;
        }

        .btn-pastel {
            background-color: var(--accent-blue);
            border: none;
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            transition: all 0.3s;
        }

        .btn-pastel:hover {
            background-color: #96c9c9;
            transform: scale(1.05);
        }

        .analogy-box {
            background-color: var(--pastel-yellow);
            border-left: 5px solid #f0ad4e;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 10px 10px 0;
            font-size: 0.95rem;
        }

        .nav-dots {
            position: fixed;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ccc;
            cursor: pointer;
        }

        .dot.active {
            background: var(--accent-blue);
        }
        
        .concept-badge {
            background-color: var(--pastel-green);
            color: #2e7d32;
            padding: 5px 12px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 0.85rem;
            display: inline-block;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<div class="slide-container">
    <div class="card-slide active animate__animated animate__fadeIn" id="slide0">
        <div class="text-center">
            <div class="mb-3" style="font-size: 4rem; color: var(--accent-blue);">
                <i class="fas fa-microchip"></i>
            </div>
            <h1 class="fw-bold">Programación 4</h1>
            <p class="lead">Semanas 5 a 7: Comportamiento del Sistema y Contratos</p>
            <hr class="my-4">
            <p>Aprenderemos a ver el sistema como una unidad y a definir reglas claras para sus acciones.</p>
            <button class="btn btn-pastel mt-3" onclick="nextSlide()">Comenzar Lección <i class="fas fa-chevron-right ms-2"></i></button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide1">
        <h3><i class="fas fa-cube me-2 text-primary"></i> El Sistema como "Caja Negra"</h3>
        <p>En el análisis de comportamiento, no nos importa <em>cómo</em> funciona el código por dentro todavía. Nos enfocamos en las interacciones entre los <strong>Actores</strong> y el <strong>Sistema</strong>.</p>
        <ul>
            <li><strong>DSS (Diagrama de Secuencia del Sistema):</strong> Muestra los eventos que los actores envían al sistema.</li>
            <li><strong>Capa de Análisis:</strong> El sistema es visto como una sola clase principal que recibe mensajes.</li>
        </ul>
        <div class="analogy-box">
            <i class="fas fa-calculator me-2"></i><strong>Analogía:</strong> Al usar una **calculadora**, tú presionas botones (eventos) y recibes un resultado. No necesitas saber qué circuitos eléctricos se activan para ver el "10" en pantalla. Eso es ver la calculadora como una **Caja Negra**.
        </div>
        <div class="mt-4 text-center">
            <button class="btn btn-pastel" onclick="prevSlide()">Atrás</button>
            <button class="btn btn-pastel" onclick="nextSlide()">Siguiente</button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide2">
        <h3><i class="fas fa-file-contract me-2 text-success"></i> Contratos de Software</h3>
        <p>Cada operación importante del sistema debe tener un "Contrato" que asegure su correcto funcionamiento.</p>
        <div class="row g-3">
            <div class="col-md-6">
                <div class="p-3 rounded h-100" style="background-color: var(--pastel-pink);">
                    <span class="concept-badge">Precondición</span>
                    <p class="small mb-0">Lo que debe ser <strong>cierto</strong> antes de ejecutar la acción. Si no se cumple, el sistema no garantiza nada.</p>
                </div>
            </div>
            <div class="col-md-6">
                <div class="p-3 rounded h-100" style="background-color: var(--pastel-green);">
                    <span class="concept-badge">Postcondición</span>
                    <p class="small mb-0">El cambio en el <strong>estado</strong> del sistema después de la acción (qué objetos se crearon o qué relaciones cambiaron).</p>
                </div>
            </div>
        </div>
        <div class="analogy-box">
            <i class="fas fa-utensils me-2"></i><strong>Analogía:</strong> En un restaurante, la **Precondición** es tener dinero y hambre. La **Postcondición** es que tu hambre desapareció y el restaurante tiene tu dinero.
        </div>
        <div class="mt-4 text-center">
            <button class="btn btn-pastel" onclick="prevSlide()">Atrás</button>
            <button class="btn btn-pastel" onclick="nextSlide()">Siguiente</button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide3">
        <h3><i class="fas fa-layer-group me-2 text-warning"></i> Clases Abstractas e Interfaces</h3>
        <p>A veces creamos moldes que no se pueden usar directamente, pero sirven para organizar a otros.</p>
        <ul>
            <li><strong>Clase Abstracta:</strong> Una clase que no puede tener "hijos" directos (instancias). Define comportamiento común pero incompleto.</li>
            <li><strong>Interfaz:</strong> Un contrato puro. Solo dice <em>qué</em> debe hacer un objeto, pero no <em>cómo</em>.</li>
        </ul>
        <div class="analogy-box">
            <i class="fas fa-paw me-2"></i><strong>Analogía:</strong> "Animal" es una **Clase Abstracta**. No puedes ver un "Animal" genérico en la calle, ves un Perro o un Gato. Por otro lado, un "Control Remoto" es una **Interfaz**: sirve para tele, radio o aire, siempre que tengan el botón "Encender".
        </div>
        <div class="mt-4 text-center">
            <button class="btn btn-pastel" onclick="prevSlide()">Atrás</button>
            <button class="btn btn-pastel" onclick="nextSlide()">Siguiente</button>
        </div>
    </div>

    <div class="card-slide animate__animated animate__fadeIn" id="slide4">
        <div class="text-center">
            <i class="fas fa-brain mb-3" style="font-size: 3rem; color: #ffca28;"></i>
            <h3>Desafío: Semanas 5 a 7</h3>
            <p>¿Listo para validar lo aprendido sobre el comportamiento del sistema?</p>
            <button class="btn btn-pastel btn-lg" onclick="startQuiz()">Iniciar Test</button>
            <hr>
            <button class="btn btn-link text-secondary" onclick="goToSlide(0)">Volver a empezar lección</button>
        </div>
    </div>
</div>

<div class="nav-dots">
    <div class="dot active" onclick="goToSlide(0)"></div>
    <div class="dot" onclick="goToSlide(1)"></div>
    <div class="dot" onclick="goToSlide(2)"></div>
    <div class="dot" onclick="goToSlide(3)"></div>
    <div class="dot" onclick="goToSlide(4)"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    let currentSlide = 0;
    const totalSlides = 5;

    function updateSlides() {
        document.querySelectorAll('.card-slide').forEach((s, i) => s.classList.toggle('active', i === currentSlide));
        document.querySelectorAll('.dot').forEach((d, i) => d.classList.toggle('active', i === currentSlide));
    }

    function nextSlide() { if(currentSlide < totalSlides-1) { currentSlide++; updateSlides(); } }
    function prevSlide() { if(currentSlide > 0) { currentSlide--; updateSlides(); } }
    function goToSlide(n) { currentSlide = n; updateSlides(); }

    async function startQuiz() {
        const questions = [
            { 
                q: "¿Qué significa ver al sistema como una 'Caja Negra'?", 
                opts: { a: "Ver el código fuente", b: "Ver solo entradas y salidas", c: "Ver los errores del sistema" }, 
                ans: "b" 
            },
            { 
                q: "¿Qué parte de un contrato describe lo que debe ser cierto ANTES de una operación?", 
                opts: { a: "Postcondición", b: "Invariante", c: "Precondición" }, 
                ans: "c" 
            },
            { 
                q: "¿Se puede crear un objeto (instancia) de una Clase Abstracta?", 
                opts: { a: "No, nunca", b: "Sí, siempre", c: "Solo si tiene atributos" }, 
                ans: "a" 
            },
            { 
                q: "¿Qué diagrama muestra el diálogo entre los Actores y el Sistema?", 
                opts: { a: "Diagrama de Clases", b: "Diagrama de Secuencia del Sistema (DSS)", c: "Diagrama de Objetos" }, 
                ans: "b" 
            },
            { 
                q: "Un Contrato de Software se utiliza principalmente para definir...", 
                opts: { a: "El precio del software", b: "El comportamiento de una operación", c: "La interfaz gráfica" }, 
                ans: "b" 
            }
        ];

        let hits = 0;
        let summaryHTML = '<div style="text-align:left; font-size:0.9rem;"><hr>';

        for (let i = 0; i < questions.length; i++) {
            const { value: userAns } = await Swal.fire({
                title: `Pregunta ${i+1}/5`,
                text: questions[i].q,
                input: 'radio',
                inputOptions: questions[i].opts,
                inputValidator: (v) => !v && '¡Selecciona una opción!',
                confirmButtonColor: '#b2d8d8'
            });

            const isCorrect = userAns === questions[i].ans;
            if (isCorrect) hits++;
            summaryHTML += `<p>${isCorrect ? '✅' : '❌'} <strong>P${i+1}:</strong> ${questions[i].opts[questions[i].ans]}</p>`;
        }

        Swal.fire({
            title: hits >= 3 ? '¡Excelente!' : 'A seguir repasando',
            html: `<h4>Puntaje: ${hits}/5</h4>${summaryHTML}`,
            icon: hits >= 3 ? 'success' : 'info',
            confirmButtonText: 'Ir al Menú Principal',
            confirmButtonColor: '#b2d8d8'
        }).then(() => window.location.href = '../index.html');
    }
</script>

</body>
</html>